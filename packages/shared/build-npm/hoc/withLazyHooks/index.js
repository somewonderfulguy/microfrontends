import{jsxs as e,jsx as r,Fragment as t}from"react/jsx-runtime";import{useQuery as o}from"react-query";import{ErrorBoundary as n}from"react-error-boundary";import{useState as d,useCallback as a,Fragment as c}from"react";let i;const s=new Uint8Array(16);function l(){if(!i&&(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(s)}const u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));var p={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function m(e,r,t){if(p.randomUUID&&!r&&!e)return p.randomUUID();const o=(e=e||{}).random||(e.rng||l)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,r){t=t||0;for(let e=0;e<16;++e)r[t+e]=o[e];return r}return function(e,r=0){return(u[e[r+0]]+u[e[r+1]]+u[e[r+2]]+u[e[r+3]]+"-"+u[e[r+4]]+u[e[r+5]]+"-"+u[e[r+6]]+u[e[r+7]]+"-"+u[e[r+8]]+u[e[r+9]]+"-"+u[e[r+10]]+u[e[r+11]]+u[e[r+12]]+u[e[r+13]]+u[e[r+14]]+u[e[r+15]]).toLowerCase()}(o)}var f="federated-module_error__-YQZp",y="federated-module_errorButton__-Mreg";!function(e,r){void 0===r&&(r={});var t=r.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===t&&o.firstChild?o.insertBefore(n,o.firstChild):o.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(".federated-module_error__-YQZp{background:rgba(255,0,0,.226);display:inline-block;padding:5px 15px 20px}.federated-module_errorButton__-Mreg{cursor:pointer}");const h=({children:t,error:o,resetErrorBoundary:n})=>e("div",Object.assign({role:"alert",className:f},{children:[r("p",{children:t}),r("pre",{children:o.message}),r("button",Object.assign({onClick:n,className:y,title:"Reset component"},{children:"Try to reset"}))]})),g=(e,r)=>{console.log("%cFederated module failed!",((e=18)=>`color: white; background: red; font-size: ${e}px`)(24)),console.dir(e),r&&console.dir(r.componentStack)},b=({render:e})=>{const t=()=>(new Date).getTime(),[o,n]=d((()=>t())),i=a((()=>{n(t())}),[]);return r(c,{children:e(i)},o)},O=({hooks:e,render:n,renderFallback:d,queryKey:a=m(),delayedElement:c})=>{const i={staleTime:1/0,cacheTime:0,refetchOnWindowFocus:!1},{data:s,isLoading:l,isError:u,refetch:p,error:f}=o(a,(()=>Promise.all(Object.values(e))),i),y=r(t,{children:null!=c?c:r("div",{"aria-busy":"true"})});if(l)return y;if(u){const e=(null==f?void 0:f.message)?f:new Error("string"==typeof f?f:"Unknown error on federated hooks loading");return g(e),r(t,{children:d(e,p)})}return(e=>r(t,{children:e?n(e):null}))(s)},k=e=>{var{hooks:t,Component:o,Fallback:d}=e,a=function(e,r){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(e);n<o.length;n++)r.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(t[o[n]]=e[o[n]])}return t}(e,["hooks","Component","Fallback"]);return e=>r(b,{render:c=>r(n,Object.assign({fallbackRender:t=>d?r(d,Object.assign({},t,e)):r(h,Object.assign({},t,e,{resetErrorBoundary:c},{children:"Federated hook(s) failed!"})),onError:(...e)=>g(...e)},{children:r(O,Object.assign({hooks:t,render:n=>{const d=Object.keys(t),a={};return d.forEach(((e,r)=>a[e]=n[r].default)),r(o,Object.assign({},e,a))},renderFallback:(e,t)=>r(h,Object.assign({error:e,resetErrorBoundary:()=>t()},{children:"Federated hook(s) failed!"}))},a))}))})};export{k as withLazyHooks};
//# sourceMappingURL=index.js.map
